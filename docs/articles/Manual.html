<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Handleiding Modoma app • modoma</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Handleiding Modoma app">
<meta property="og:description" content="modoma">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    

    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">modoma</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">1.0.2</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/Manual.html">Handleiding Modoma app</a>
    </li>
    <li>
      <a href="../articles/Metadata.html">Handleiding nieuwe datasets</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right"></ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Handleiding Modoma app</h1>
            
      
      
      <div class="hidden name"><code>Manual.Rmd</code></div>

    </div>

    
    
<p>In het Modoma project (2021-2023) hebben Floricode, Naktuinbouw en
Biometris/WUR de mogelijkheden onderzocht van automatische identificatie
van bloemkenmerken in rozen en gerbera’s, op grond van beelden. Deze
beelden worden door toepassing van AI gelinkt aan de databases waarin de
kenmerken zijn opgeslagen. Om een overzicht te krijgen van de inhoud van
die databases is een app ontwikkeld op basis van R/Shiny. Met deze app
kun je in je browser een overzicht van de kenmerken bekijken, je kunt
records vergelijken, en je kunt een set waardes definieren voor een
subset van de kenmerken, en dan kijken welke records daar het meest op
lijken. Deze versie werkt voor vier datasets: FloricodeGerbera,
FloricodeRose, NaktuinbouwGerbera en NaktuinbouwRose. Het is mogelijk
dit op een relatief eenvoudige manier ook toe te passen op andere
datasets met dezelfde opbouw.</p>
<p>De software draait op alle gangbare besturingssystemen (Windows,
MacOS, Linux). Dit document beschrijft de installatie en het gebruik van
de app.</p>
<div class="section level2">
<h2 id="installatie">Installatie<a class="anchor" aria-label="anchor" href="#installatie"></a>
</h2>
<p>De installatie van de app kan worden gedaan in een paar eenvoudige
stappen:</p>
<ol style="list-style-type: decimal">
<li><p>Installeer R op je computer. Uitgebreide instructies voor alle
besturingssystemen zijn te vinden op <a href="https://cran.r-project.org/" class="external-link uri">https://cran.r-project.org/</a>. Voor Windows komt het er op
neer dat je de installatie-executable downloadt (<a href="https://cran.r-project.org/bin/windows/base/R-4.3.0-win.exe" class="external-link uri">https://cran.r-project.org/bin/windows/base/R-4.3.0-win.exe</a>)
en installeert door te dubbelklikken - binnen een beschermde omgeving
kan het zijn dat IT support daarbij moet helpen voor de
permissies.</p></li>
<li><p>Save het modoma_1.0.0.tar.gz bestand op een plek op je harde
schijf, in Windows bijvoorbeeld in de nieuwe map
“C:/Rsoftware”.</p></li>
<li><p>Start R op, en type op de command line het volgende:</p></li>
</ol>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"remotes"</span><span class="op">)</span></span>
<span><span class="fu">remotes</span><span class="fu">::</span><span class="fu"><a href="https://remotes.r-lib.org/reference/install_local.html" class="external-link">install_local</a></span><span class="op">(</span><span class="va">path_to_file</span>, dependencies <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
<p>waarbij path_to_file vervangen moet worden door de plek waar het
modoma bestand is opgeslagen, in Windows bijvoorbeeld:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">remotes</span><span class="fu">::</span><span class="fu"><a href="https://remotes.r-lib.org/reference/install_local.html" class="external-link">install_local</a></span><span class="op">(</span><span class="st">"C:/Rsoftware/modoma_1.0.0.tar.gz"</span>, dependencies <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
<ol start="4" style="list-style-type: decimal">
<li>Nu is het modoma pakket beschikbaar. Het kan worden opgeroepen door
het volgende commando in R te geven:</li>
</ol>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va">modoma</span><span class="op">)</span></span></code></pre></div>
<ol start="5" style="list-style-type: decimal">
<li>Tenslotte wordt de webpagina geopend door het volgende
commando:</li>
</ol>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/launch.html">launch</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="gebruik-van-de-app">Gebruik van de app<a class="anchor" aria-label="anchor" href="#gebruik-van-de-app"></a>
</h2>
<p>De app bestaat uit een aantal afzonderlijke tabbladen:</p>
<ul>
<li>Data load</li>
<li>Matching by reference</li>
<li>Matching by trait</li>
<li>PCoA</li>
</ul>
<p>In het vervolg van dit document worden de tabbladen één voor één
besproken.</p>
<div class="section level3">
<h3 id="data-load">Data load<a class="anchor" aria-label="anchor" href="#data-load"></a>
</h3>
<p>Op het eerste tabblad, “Data load” kunnen de data en de bijbehorende
afbeeldingen worden ingelezen. De ingelezen data vormt de basis voor de
analyses die op de volgende tabbladen kunnen worden uitgevoerd.</p>
<p><img src="DataLoad.png"></p>
<ol style="list-style-type: decimal">
<li><p>Klik op Browse… en selecteer een .csv bestand met de
data.</p></li>
<li><p>Klik op Select image directory en selecteer de directory waarin
de afbeeldingen staan opgeslagen.</p></li>
<li><p>Nadat zowel de data als de afbeeldingen zijn geselecteerd, wordt
een tabel gegenereerd waarin de inhoud van het data bestand gekoppeld is
aan de geselecteerde afbeeldingen. Dit houdt in dat verwijzingen in het
data bestand naar de bestanden met afbeeldingen in de tabel zijn
vervangen door de afbeeldingen zelf.</p></li>
</ol>
<p><img src="DataLoadTable.png" width="850"></p>
<p>In de tabel kan op verschillende manieren verder ingezoomd worden op
verschillende aspecten van de data.</p>
<ul>
<li><p>Door over de afbeeldingen van de bloemen te bewegen met de muis
wordt een uitvergrote versie van de afbeelding getoond.</p></li>
<li><p>Standaard worden 10 regels in de tabel getoond. Dit kan worden
aangepast door linksboven op het menuutje “Show 10 rows” te klikken en
een ander aantal regels te selecteren.</p></li>
<li><p>Standaard worden alle kolommen in de tabel getoond. Dit kan
worden aangepast door in het menu “Column visibility” kolommen te
verbergen door erop te klikken. Nogmaals klikken op dezelfde kolom zorgt
ervoor dat deze weer getoond wordt. De twee knoppen ernaast, “Show all”
en “Show none”, geven een snelle manier om alle kolommen weer te tonen,
danwel om ze juist allemaal te verbergen.</p></li>
<li><p>In het “Search” vak rechtsboven kan op een willekeurige tekst in
de tabel gezocht worden. Het zoeken wordt gedaan in alle kolommen van de
tabel en alleen rijen waarin de zoekterm wordt gevonden, worden getoond.
Om alle rijen weer te tonen kan het zoekvak worden leeggemaakt.</p></li>
<li><p>Binnen een enkele kolom kan gefilterd worden. Dit kan door in het
vak onder de kolomnaam waar standaard <em>All</em> staat te klikken.
Afhankelijk van het type kolom verschilt de filtermethode. Voor factor
kolommen, kolommen waarin de inhoud een beperkte set waarden aanneemt,
wordt er dan een dropdown menu weergegeven waarin waarden kunnen worden
geselecteerd. Voor numerieke kolommen een schuifbalk waarin onder- en
bovengrens voor de waarden in de kolom kunnen worden aangegeven. Voor de
resterende kolommen kan een willekeurige tekst worden getypt waarna
alleen rijen waarin in de betreffende kolom deze tekst voorkomt worden
getoond.</p></li>
<li><p>De tabel kan worden gesorteerd gebaseerd op de inhoud van een
kolom. Dat kan door op de pijltjes te klikken die naast de kolomnaam
staan. Pijltje omhoog voor oplopend sorteren, omlaag voor aflopend
sorteren.</p></li>
<li><p>Met de knoppen rechts onderaan de tabel kan worden genavigeerd
tussen de verschillende pagina’s waaruit de tabel bestaat.</p></li>
</ul>
</div>
<div class="section level3">
<h3 id="matching-by-reference">Matching by reference<a class="anchor" aria-label="anchor" href="#matching-by-reference"></a>
</h3>
<p>Op dit tabblad kan voor een gekozen referentie variëteit gezocht
worden naar de variëteiten die de meeste gelijkenis vertonen met deze
variëteit. De vergelijking kan gedaan worden op basis van één of meer in
de data aanwezige kenmerken.</p>
<p>De stappen om de vergelijking te doen zijn als volgt:</p>
<ol style="list-style-type: decimal">
<li><p>Kies de referentie variëteit door in het dropdown menu bij
“Select reference” de variëteit te selecteren. Het is mogelijk om, in
plaats van te selecteren met behulp van de muis, het nummer van de
variëteit in ditzelfde veld te typen. Daarvoor moet wel eerst de
oorspronkelijke tekst worden verwijderd.</p></li>
<li><p>Kies het gewenste aantal variëteiten dat moet worden gezocht.
Standaard staat dit op 10, wat inhoudt dat er gezocht zal worden naar de
10 variëteiten die de meeste gelijkenis vertonen met de referentie
variëteit. Dit aantal kan worden aangepast door in “Number of closest
flowers” een ander aantal te typen, of door met behulp van de pijltjes
het aantal te verhogen of verlagen.</p></li>
<li><p>Selecteer de kenmerken die gebruikt moeten worden in de
vergelijking tussen de variëteiten. Er moet minimaal 1 kenmerk
geselecteerd worden door het aanvinken van een hokje voor het
betreffende kenmerk onder “Select variables for comparison”. Via “Select
/ Deselect all” kunnen alle kenmerken in één keer geselecteerd danwel
gedeselecteerd worden.</p></li>
<li><p>Klik op “Find closest flowers”.</p></li>
</ol>
<p>De afstand van de referentie variëteit tot alle andere variëteiten
wordt nu uitgerekend en de variëteiten met de kleinste afstand, ofwel de
meest gelijkende, worden getoond in een tabel die vergelijkbaar is met
die op het voorgaande tabblad. De tabel heeft een extra kolom afstand
waarin de berekende afstand tot de referentie variëteit wordt
weergegeven. Deze variëteit zelf staat ook in de tabel met een
lichtblauwe achtergrond.</p>
<p>In de tabel worden naast een aantal standaard kolommen alleen de
kenmerken getoond die zijn meegenomen in de vergelijking. De andere
kenmerken kunnen nog wel zichtbaar worden gemaakt door extra kolommen
zichtbaar te maken in “Column visibility”. De kolomzichtbaarheid is
gekoppeld aan die op het eerste tabblad. Kolommen die hier zichtbaar
gemaakt worden, worden dat ook op tabblad één en vice versa.</p>
<p><img src="MatchRef.png" width="850"></p>
</div>
<div class="section level3">
<h3 id="matching-by-trait">Matching by trait<a class="anchor" aria-label="anchor" href="#matching-by-trait"></a>
</h3>
<p>Op het derde tabblad kan op basis van een aantal geselecteerde
kenmerken en daarbij behorende waarden gezocht worden naar de
variëteiten die het meest overeenkomen met die waarden.</p>
<p>De stappen om tot deze vergelijking te komen zijn als volgt:</p>
<ol style="list-style-type: decimal">
<li><p>Selecteer één of meer kenmerken uit het dropdown menu onder
“Select traits”. Na selectie van de kenmerken wordt voor elk van de
geselecteerde kenmerken een nieuw selectieveld getoond.</p></li>
<li><p>Selecteer in elk van de nieuwe selectievelden in het dropdown
menu voor dat veld de gewenste waarde voor de variëteiten waarnaar
gezocht moet worden.</p></li>
<li><p>Kies het gewenste aantal variëteiten dat moet worden gezocht.
Standaard staat dit op 10, wat inhoudt dat er gezocht zal worden naar de
10 variëteiten die de meeste gelijkenis vertonen met de referentie
variëteit. Dit aantal kan worden aangepast door in “Number of closest
flowers” een ander aantal te typen, of door met behulp van de pijltjes
het aantal te verhogen of verlagen.</p></li>
<li><p>Klik op “Find closest flowers”.</p></li>
</ol>
<p>Voor alle variëteiten wordt nu de afstand berekend tot de
geselecteerde referentiewaarden. De variëteiten met de kleinste afstand
tot de referentiewaarden, ofwel de best op de waarden gelijkenden,
worden getoond in een tabel. Deze tabel heeft exact dezelfde
eigenschappen als die op het tweede tabblad, voor een uitgebreidere
omschrijving zie die sectie.</p>
<p>Ook de zichtbare kolommen in deze tabel zijn nu gekoppeld met die op
de eerdere tabbladen. Verbergen of zichtbaar maken van kolommen op het
ene tabblad zal hetzelfde doen op de andere twee tabbladen.</p>
<p><img src="MatchTrait.png" width="850"></p>
</div>
<div class="section level3">
<h3 id="pcoa">PCoA<a class="anchor" aria-label="anchor" href="#pcoa"></a>
</h3>
<p>Op het laatste tabblad kan een <strong>P</strong>rincipal
<strong>Co</strong>ordinate <strong>A</strong>nalysis worden uitgevoerd.
De resultaten hiervan worden gevisualiseerd en kunnen daarna gekleurd
worden op basis van een kenmerk uit de data.</p>
<p>De stappen om een PCoA uit te voeren zijn als volgt:</p>
<ol style="list-style-type: decimal">
<li><p>Selecteer de kenmerken die gebruikt moeten worden in de PCoA. Er
moet minimaal 1 kenmerk geselecteerd worden door het aanvinken van een
hokje voor het betreffende kenmerk onder “Select variables for PCoA”.
Via “Select / Deselect all” kunnen alle kenmerken in één keer
geselecteerd danwel gedeselecteerd worden.</p></li>
<li><p>Kies bij “Select variable for coloring” een kenmerk volgens welk
de resultaten in de output gekleurd moeten worden.</p></li>
<li><p>Klik op “Perform PCoA”.</p></li>
</ol>
<p>Er wordt nu een PCoA uitgevoerd en de resultaten hiervan worden
gevisualiseerd in een biplot met op de x-as PC1 en op de y-as PC2. De
punten in de plot worden gekleurd volgens het kenmerk gekozen bij
2).</p>
<ul>
<li><p>De kleuring in de grafiek kan worden aangepast door bij “Select
variable for coloring” een nieuw kenmerk te kiezen. Het is niet nodig
dan de analyse opnieuw uit te voeren.</p></li>
<li><p>Door in de plot met de muis over punten heen te bewegen worden de
afbeelding en het nummer van de variëteit getoond.</p></li>
<li><p>In het plaatje kan ingezoomd worden door met de linkermuisknop
ingedrukt een rechthoek te tekenen. Na het loslaten van de
linkermuisknop worden de assen in het plaatje aangepast zodat ze
samenvallen met de geselecteerde rechthoek. Om weer uit te zoomen moet
ergens in de grafiek twee keer snel achter elkaar geklikt
worden.</p></li>
<li><p>Door in de legenda op een waarde te klikken wordt die waarde niet
langer weergegeven in het plaatje. Door opnieuw op de waarde te klikken
worden de betreffende punten weer zichtbaar. Door twee keer snel achter
elkaar op een waarde te klikken wordt die waarde geïsoleerd, alleen
punten voor die waarde zijn nog zichtbaar in het plaatje. Nogmaals twee
keer klikken zorgt ervoor dat alle punten weer zichtbaar
worden.</p></li>
<li><p>Het plaatje kan opgeslagen worden als .png bestand door op het
camera symbooltje rechtsbovenin de grafiek te klikken.</p></li>
</ul>
</div>
</div>
<div class="section level2">
<h2 id="technische-details">Technische details<a class="anchor" aria-label="anchor" href="#technische-details"></a>
</h2>
<div class="section level3">
<h3 id="gebruikte-afstandsmaten">Gebruikte afstandsmaten<a class="anchor" aria-label="anchor" href="#gebruikte-afstandsmaten"></a>
</h3>
<p>Het onderliggende R-pakket met de naam modoma definieert welke
afstandsmaten gebruikt worden voor welke variabelen. Voor numerieke
variabelen wordt de gewone Euclidische afstand gebruikt. Andere typen
variabelen worden, wanneer dat kan, ook omgezet naar getallen, waarna de
Euclidische afstand gebruikt kan worden. Dit geldt voor kleuren die door
specifieke codes (bijvoorbeeld RHS codes) zijn aangegeven, maar ook voor
geordende factoren (bv. klein, middel, groot). Tenslotte wordt voor
niet-geordende factoren (categorische variabelen, zoals kleurnamen) een
Tanimoto-afstandsmaat gebruikt, waarbij de afstand alleen dan nul is als
beide records exact dezelfde waarde bevatten voor die variabele, en
anders gelijk is aan 1.</p>
<p>Wanneer op deze voor iedere variabele dan een afstandsmatrix is
berekend, worden deze matrices gecombineerd tot een algemene
afstandsmaat. Om te voorkomen dat een of enkele variabelen de overall
afstandsmaat gaan domineren, bijvoorbeeld door de schaal waarop de
variabele is weergegeven, worden alle afstanden eerst geschaald (waarbij
de kleinste afstand op nul gezet wordt, en de grootste op een).
Vervolgens worden de afstanden bij elkaar opgeteld. Onder de motorkap
zijn al voorbereidingen getroffen om het mogelijk te maken gewichten toe
te kennen aan specifieke variabelen, waardoor men bepaalde
karakteristieken extra kan benadrukken. In de huidige versie van de
gebruikersinterface is dat nog niet geimplementeerd.</p>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p></p>
<p>Developed by Ron Wehrens.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

      </footer>
</div>

  


  

  </body>
</html>
