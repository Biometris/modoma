<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Handleiding nieuwe datasets • modoma</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Handleiding nieuwe datasets">
<meta property="og:description" content="modoma">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    

    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">modoma</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">1.0.2</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/Manual.html">Handleiding Modoma app</a>
    </li>
    <li>
      <a href="../articles/Metadata.html">Handleiding nieuwe datasets</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right"></ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Handleiding nieuwe datasets</h1>
            
      
      
      <div class="hidden name"><code>Metadata.Rmd</code></div>

    </div>

    
    
<p>De app ontwikkeld in het Modoma project is in eerste instantie
ontwikkeld voor gebruik met vier datasets: FloricodeGerbera,
FloricodeRose, NaktuinbouwGerbera en NaktuinbouwRose. Het is echter ook
mogelijk om de app te gebruiken voor andere datasets met data voor
bijvoorbeeld andere gewassen. Om dit te kunnen doen moeten deze datasets
aan een aantal voorwaarden voldoen en er moet een zogeheten metadata
bestand behorend bij de dataset beschikbaar zijn. Dit metadata bestand
beschrijft welke kolommen in de data welke informatie bevatten en hoe
deze informatie in de app geïnterpreteerd moet worden. Dit is
voornamelijk van belang bij het berekenen van afstanden tussen de
verschillende variëteiten.</p>
<p>Dit document beschrijft de voorwaarden waaraan een nieuwe dataset
moet voldoen en zal een stap voor stap beschrijving geven van het maken
van een metadata bestand dat door de app gebruikt kan worden. Hierbij
zal de FloricodeGerbera data als voorbeeld worden gebruikt. Voor een
handleiding voor het gebruik van de app zie ………</p>
<div class="section level2">
<h2 id="voorwaarden">Voorwaarden<a class="anchor" aria-label="anchor" href="#voorwaarden"></a>
</h2>
<p>Als deze app wordt gebruikt voor het bekijken van andere datasets dan
de vier voorbeeld datasets, dan moeten deze datasets aan de volgende
voorwaarden voldoen:</p>
<ul>
<li><p>Er moet een kolom in de data aanwezig zijn waarin een unieke
referentiecode per variëteit staat. De naam van deze kolom is
irrelevant. Bij de Floricode bestanden is dit VKCNr en bij Naktuinbouw
RVPnr.</p></li>
<li><p>Er moet een kolom in de data aanwezig zijn met daarin de naam van
de file met de afbeelding van de variëteit. .tif en .jpg files
ondersteund. De naam mag leeg zijn. Er zal dan geen afbeelding worden
getoond. In zowel de Floricode als de naktuinbouw bestanden staan de
verwijzingen naar de files met afbeeldingen in de kolom
filename.</p></li>
</ul>
</div>
<div class="section level2">
<h2 id="metadata-bestand">Metadata bestand<a class="anchor" aria-label="anchor" href="#metadata-bestand"></a>
</h2>
<p>Een nieuwe dataset moet op de juiste manier ingelezen worden door de
app. De app moet de kolom herkennen waarin de referentiecode staat,
files met foto’s moeten correct gekoppeld worden en de verschillende
kenmerken moeten als zodanig herkend worden. Om dit voor elkaar te
krijgen moet de app weten hoe de dataset is opgebouwd. Hiervoor kunnen
we een zogenaamd metadata bestand gebruiken.</p>
<p>Hoe zo’n metabestand opgebouwd kan worden, wordt hieronder beschreven
aan de hand van de Floricode Gerbera data.</p>
<div class="section level3">
<h3 id="data-overzicht">Data overzicht<a class="anchor" aria-label="anchor" href="#data-overzicht"></a>
</h3>
<p>Voor een eerste inzicht in de data kijken we eerst naar een aantal
geselecteerde rijen en kolommen uit het bestand. Het aantal rijen is
beperkt tot 10 en een aantal kolommen zijn verborgen voor de
duidelijkheid. Voor het aanmaken van het metadata bestand maakt dit geen
verschil.</p>
<p>We zien twee kolommen met een referentiecode, VBN_CODE en VKCNr. In
de app willen we VKCNr gebruiken als referentie en zullen we VBN_CODE
grotendeels negeren. In de kolom VBN_PRODUCTNAAM_NL staat de naam van de
variëteit, de kolom filename geeft de van het bestand waarin de foto van
de variëteit staat. De overige kolommen bevatten kenmerken van de
betreffende variëteit. In dit bestand zijn onbekende/missende waarden
aangegeven met NA. Leeg laten van de betreffende velden in het bestand
kan ook.</p>
<p><img src="GerberaContent.png" style="width:100.0%"></p>
</div>
<div class="section level3">
<h3 id="opzetten-van-een-metadata-bestand">Opzetten van een metadata bestand<a class="anchor" aria-label="anchor" href="#opzetten-van-een-metadata-bestand"></a>
</h3>
<p>Het metadata bestand heeft een vaste structuur, een .csv bestand met
daarin vijf kolommen, colname, colnameDisplay, colType, traitType,
levels. Een verder leeg bestand met deze structuur is beschikbaar via
….. Door dit bestand als basis te gebruiken en verder in te vullen zal
de structuur altijd herkend worden door de app.</p>
<p>De eerste stap is het toevoegen van alle kolommen in het nieuwe
databestand in de kolom colname in het metadatabestand. Voor ons
voorbeeld geeft dat dit:</p>
<p><img src="GerberaMeta1.png"></p>
<p>In de kolom colnameDisplay komen de namen van de kolommen zoals deze
getoond moeten worden in de verschillende grafieken en tabellen in de
app. In het voorbeeld is ervoor gekozen om de filename kolom in de app
te tonen met de naam image. Alle andere kolommen behouden hun
oorspronkelijke naam. Een alternatieve naam kan nuttig zijn bij hele
lange kolomnamen. Om tabellen overzichtelijk te houden kan dan voor een
afgekorte vorm gekozen worden.</p>
<p><img src="GerberaMeta2.png" width="508"></p>
<p>De volgende stap is per kolom aangeven welk type informatie in de
kolom wordt weergegeven. Hiervoor zijn drie mogelijkheden:</p>
<ul>
<li><p>id - de kolom waarin het referentienummer staat. Er moet altijd
precies één kolom zijn waarvoor dit het geval is. In de metadata moet id
dus precies één keer voorkomen in de kolom colType. In ons voorbeeld
staat het referentienummer in de de kolom VKCNr. Voor die kolom wordt
colType dus “id”.</p></li>
<li><p>trait - de kolommen waarin kenmerken van de variëteiten staan.
Deze kolommen zullen in de app gebruikt worden voor het berekenen van
afstanden tussen de verschillende variëteiten. In ons voorbeeld staan in
alle kolommen vanaf Bloeiwijze kenmerken van de variëteiten. Al deze
kolommen worden dus aangemerkt als “trait” in het metadata
bestand.</p></li>
<li><p>veld leeg laten - de overige kolommen hebben geen speciale
functie in de app en voor deze kolommen hoeft geen waarde te worden
ingevuld in de kolom colType in het metadata bestand.</p></li>
</ul>
<p><img src="GerberaMeta3.png" width="508"></p>
<p>In de volgende stap gaan we per kenmerk aangeven wat voor type
kenmerk het is. Dit is van belang omdat voor verschillende typen
kenmerken afstanden op verschillende manieren berekend worden. Zie voor
een uitgebreide uitleg hierover ……. De mogelijke waarden voor traitType
zijn</p>
<ul>
<li><p>RHS - voor kolommen met RHS kleurcodes. In het voorbeeld is dit
alleen de kolom BloemRHS</p></li>
<li><p>factor - voor kolommen met categorische variabelen waarvoor in de
categorieën geen ordening zit, bijvoorbeeld kleurnamen. In het voorbeeld
zijn dit de kolommen Bloeiwijze, Bloemkleur, Bloemkleurverdeling en
Bloemnevenkleur.</p></li>
<li><p>ordered - voor kolommen met categorische variabelen waarbij in de
categorieën een ordening aanwezig is (bijvoorbeeld klein - middel -
groot). In het voorbeeld gaat dit om de kolom Bloemtype met de
categorieën Ongevuld / enkel - Iets gevuld - Half gevuld -
Gevuld.</p></li>
</ul>
<p><img src="GerberaMeta4.png"></p>
<p>Als laatste stap moeten we voor de kenmerken met als type ordered de
volgorde van de categorieën van het betreffende kenmerk aangeven.
Hiervoor gebruiken we een tweede bestand met metadata met drie kolommen,
levels, value en level. De inhoud van dit bestand wordt in de app
gekoppeld aan de metadata via de kolom levels. Ook voor dit bestand is
een lege versie beschikbaar waar alleen de koppen zijn ingevuld via
…….</p>
<p>We moeten nu eerst een naam geven aan de categorieën in de geordende
factor Bloemtype. Er zijn geen restricties voor deze naam, maar voor de
duidelijkheid is het handig een sprekende naam te kiezen. In dit geval
hebben we gekozen om “bloemtype’ te gebruiken. Dit komt dus in de kolom
levels te staan in het metadata bestand. Daarmee is dit bestand volledig
gevuld.</p>
<p><img src="GerberaMeta5.png"></p>
<p>In het metadata bestand voor geordende factoren vullen we nu de
eerste kolom met bloemtype. Dit doen we in vier rijen omdat er voor
bloemtype vier categorieën zijn. Deze categorieën komen in de kolom
value. In de kolom level geven we de volgorde aan. In het voorbeeld
krijgt Ongevuld / enkel waarde 1, Iets gevuld waarde 2, Half gevuld
waarde 3 en Gevuld waarde 4. De volgorde zou ook andersom kunnen zijn,
dus waarde 4 voor Ongevuld / enkel en waarde 1 voor Gevuld. Dit heeft
geen invloed op de berekeningen in de app.</p>
<p><img src="GerberaMeta6.png"></p>
<p>Als er verschillende kenmerken in de metadata zitten die dezelfde
levels gebruiken dan hoeven die levels niet twee keer gedefinieerd te
worden in het bestand met metadata voor geordende factoren. In het
oorspronkelijke FloricodeGerbera bestand komt ook een kenmerk Bloemtype1
voor met dezelfde categorieën als Bloemtype. In de metadata zouden we
voor zowel Bloemtype als Bloemtype1 in de kolom levels de waarde
bloemtype kunnen zetten.</p>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p></p>
<p>Developed by Ron Wehrens.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

      </footer>
</div>

  


  

  </body>
</html>
